<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Libreria Giochi â€“ RetroLibreria</title>
  <style>
    * { box-sizing: border-box; }
    body {
      background: radial-gradient(circle at center, #0a0a0a, #000);
      color: white;
      font-family: "Segoe UI", Roboto, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header {
      width: 100%;
      padding: 20px;
      background: #101010;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
      color: #00ff99;
      box-shadow: 0 0 10px rgba(0,255,153,0.3);
    }
    #search-bar {
      width: 80%;
      max-width: 600px;
      margin: 20px 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #search-input {
      width: 100%;
      padding: 10px 15px;
      border-radius: 12px;
      border: none;
      font-size: 1rem;
      outline: none;
    }
    #filters {
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    button.filter {
      background: rgba(255,255,255,0.1);
      border: none;
      color: white;
      padding: 10px 20px;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.3s;
    }
    button.filter.active {
      background: #00ff99;
      color: black;
      font-weight: bold;
    }
    #games-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      padding: 20px;
      width: 100%;
      max-width: 1200px;
    }
    .game-card {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      overflow: hidden;
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
    }
    .game-card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px rgba(0,255,153,0.5);
    }
    .game-card img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      display: block;
    }
    .game-card .info {
      padding: 10px;
      text-align: center;
    }
    .game-card .info h3 {
      margin: 5px 0;
      font-size: 1rem;
      color: #fff;
    }
    .game-card .info span {
      font-size: 0.9rem;
      color: #00ff99;
    }
  </style>
</head>
<body>
  <header>ðŸŽ® RetroLibreria</header>

  <div id="search-bar">
    <input type="text" id="search-input" placeholder="Cerca un gioco..." />
  </div>

  <div id="filters">
    <button class="filter active" data-platform="all">Tutti</button>
    <button class="filter" data-platform="GBA">Game Boy Advance</button>
    <button class="filter" data-platform="NDS">Nintendo DS</button>
  </div>

  <div id="games-container"></div>

  <script>
  // ==========================
  //  CONFIGURAZIONE
  // ==========================
  const container = document.getElementById("games-container");
  const searchInput = document.getElementById("search-input");
  const filters = document.querySelectorAll(".filter");
  let games = [];
  let activePlatform = "all";

  // ==========================
  //  CARICAMENTO GIOCHI
  // ==========================
  async function loadGames() {
    try {
      const res = await fetch("games.json");
      games = await res.json();
      renderGames(games);
    } catch (err) {
      container.innerHTML = `<p style="color:red;">Errore nel caricamento di games.json</p>`;
      console.error(err);
    }
  }

  // ==========================
  //  FILTRAGGIO + RICERCA
  // ==========================
  function renderGames(list) {
    container.innerHTML = "";
    list.forEach(g => {
      if (activePlatform !== "all" && g.platform !== activePlatform) return;
      const card = document.createElement("div");
      card.className = "game-card";
      card.onclick = () => window.location.href = `play.html?id=${g.id}`;
      card.innerHTML = `
        <img src="${g.image || 'https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg'}" alt="${g.name}">
        <div class="info">
          <h3>${g.name}</h3>
          <span>${g.platform}</span>
        </div>
      `;
      container.appendChild(card);
    });
  }

  function filterGames() {
    const query = searchInput.value.toLowerCase();
    const filtered = games.filter(g => 
      g.name.toLowerCase().includes(query) ||
      g.id.toLowerCase().includes(query)
    );
    renderGames(filtered);
  }

  searchInput.addEventListener("input", filterGames);

  filters.forEach(btn => {
    btn.addEventListener("click", () => {
      filters.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      activePlatform = btn.dataset.platform;
      filterGames();
    });
  });

  loadGames();
  </script>
</body>
</html>
